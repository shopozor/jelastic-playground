jpsVersion: 1.3
jpsType: install
application:
  id: shopozor-configuration
  name: Shopozor
  version: 0.0
  baseUrl: https://raw.githubusercontent.com/softozor/shopozor-configuration/master/

  settings:
    fields:
      - name: gitUser
        caption: Git user
        type: string
        required: true
      - name: gitPassword
        caption: Git password
        type: string
        inputType: password
        required: true
      - name: consumerKey
        caption: Magento CONSUMER_KEY
        type: string
        required: true
      - name: consumerSecret
        caption: Magento CONSUMER_SECRET
        type: string
        required: true
      - name: accessToken
        caption: Magento ACCESS_TOKEN
        type: string
        required: true
      - name: accessTokenSecret
        caption: Magento ACCESS_TOKEN_SECRET
        type: string
        required: true

  onInstall:
    # 1. install magento
    - install:
        jps: consumer-api/manifest.jps
        envName: shopozor-consumer-api
        settings:
          gitRepo: https://bitbucket.org/softozor/shopozor-consumer-api
          gitBranch: master
          gitUser: ${settings.gitUser}
          gitPassword: ${settings.gitPassword}
          magentoHost: softozor-magento.hidora.com
          consumerKey: ${settings.consumerKey}
          consumerSecret: ${settings.consumerSecret}
          accessToken: ${settings.accessToken}
          accessTokenSecret: ${settings.accessTokenSecret}
          localConfigFile: config/local.json
    - install:
        jps: consumer-frontend/manifest.jps
        envName: shopozor-consumer-frontend
        settings:
          gitRepo: https://bitbucket.org/softozor/shopozor-consumer-frontend
          gitBranch: master
          gitUser: ${settings.gitUser}
          gitPassword: ${settings.gitPassword}
          apiHost: https://demo.vuestorefront.io
          localConfigFile: config/local.json
    # 4. install mage2vuestorefront
    # 5. install shopozor-management-api
    # 6. install shopozor-management-frontend
